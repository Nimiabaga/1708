<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Home - 1708 Hotel</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

  <style>
    /* ===== Golden Ticket Banner (unified style) ===== */
    .menu-banner {
      position: relative;
      padding: 1.6rem 0 1.05rem 0;
      margin: .6rem 0 1rem;
      background: linear-gradient(180deg,#111 0%, #000 60%, #000 100%);
      border: 1.5px solid #d4af37;
      border-radius: 7px;
      box-shadow:
        0 5px 24px 0 #00000050,
        0 1px 0 #000000,
        0 0 24px 0 #00000060;
      text-align: center;
    }
    .menu-banner .super-glow {
      position: absolute; inset:0; pointer-events: none; z-index:0;
      background: radial-gradient(50% 80% at 50% 70%, rgba(0,0,0,.35) 0%, rgba(212,175,55,0) 90%);
      opacity: 1;
    }
    .menu-banner h2 {
      position: relative; z-index:1; margin:0;
      letter-spacing:.14em;
      text-transform: uppercase;
      font-weight: 900;
      font-size: 2rem;
      background: linear-gradient(180deg,#fffde0 0%, #ffe060 25%, #e8c131 65%, #95742a 95%, #fff7cc 100%);
      -webkit-background-clip: text; background-clip: text;
      -webkit-text-fill-color: transparent;
      -webkit-text-stroke: 2px #d4af3766;
      filter: drop-shadow(0 3px 12px hsl(41, 100%, 6%)) drop-shadow(0 0 16px #ffedb366);
      text-shadow: 0 2px 18px #b8921c44;
    }
    .menu-banner h2::after {
      content:""; display:block; width:150px; height:2.5px; margin:.7rem auto 0;
      border-radius:2px;
      background: linear-gradient(90deg, transparent, #d4af37, transparent);
      box-shadow: 0 0 18px #d4af3748;
    }

    @media (max-width: 420px){
      .menu-banner h2 { font-size:1.32rem; }
      .menu-banner h2::after { width:90px; }
    }
  </style>
</head>
<body>
  <!-- Header (logo only) -->
  <header class="animate__animated animate__fadeInDown">
    <img src="images/1708.png" alt="1708 Hotel Logo" class="logo" />
  </header>

  <main>
    <section class="section active">
      <!-- Banner -->
      <div class="menu-banner">
        <span class="super-glow" aria-hidden="true"></span>
        <h2>Menu</h2>
      </div>

      <!-- Featured -->
      <h2 style="text-align:center;">üçΩÔ∏è Featured</h2>
      <div class="food-grid">
        <!-- Isi Ewu -->
        <div class="food-card" data-item="Isi-Ewu">
          <img src="images/isi-ewu-10000.jpg" alt="Isi Ewu" />
          <div class="food-info">
            <h4>Isi Ewu</h4>
            <p class="price-display">Loading...</p>
          </div>
        </div>
        <!-- Samosa -->
        <div class="food-card" data-item="Samosa (5 pieces)">
          <img src="images/samosa-5-pieces-6000.jpg" alt="Samosa (5 pieces)" />
          <div class="food-info">
            <h4>Samosa (5 pieces)</h4>
            <p class="price-display">Loading...</p>
          </div>
        </div>
        <!-- Fisherman Soup -->
        <div class="food-card" data-item="Fisherman Soup">
          <img src="images/fisherman-soup-9000.jpg" alt="Fisherman Soup" />
          <div class="food-info">
            <h4>Fisherman Soup</h4>
            <p class="price-display">Loading...</p>
          </div>
        </div>
        <!-- Peppered Snail -->
        <div class="food-card" data-item="Peppered Snail">
          <img src="images/peppered-snail-4500.jpg" alt="Peppered Snail" />
          <div class="food-info">
            <h4>Peppered Snail</h4>
            <p class="price-display">Loading...</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Bottom Navigation -->
  <nav class="bottom-nav">
    <a href="./index.html" class="active">Home</a>
    <a href="./food.html">Food</a>
    <a href="./drinks.html">Drinks</a>
    <a href="./rooms.html">Rooms</a>
    <a href="./contact.html">Contact</a>
  </nav>

  <script>
    // Dynamic price loading from admin database
    (async function() {
      const API_URL = 'https://script.google.com/macros/s/AKfycbw5v7gImXthxWkHUaCtDdDGx4U_tts7_1JWuHA9ojyu6nm2qvHyPehZrtfEK2j5JTMy/exec';
      const TOKEN = 'Forgive1988@';

      try {
        // Fetch all items from the database (same format as admin panel)
        const response = await fetch(`${API_URL}?token=${encodeURIComponent(TOKEN)}`);
        const data = await response.json();

        console.log('API Response:', data); // Debug log

        if (!data.ok || !data.rows) {
          throw new Error('Failed to load prices');
        }

        console.log('Total items loaded:', data.rows.length); // Debug log

        // Create a map of items by name for quick lookup
        const itemMap = new Map();
        data.rows.forEach(item => {
          itemMap.set(item.name, {
            price: item.price || 0,
            available: item.available !== false
          });
          console.log(`Mapped: ${item.name} = ‚Ç¶${item.price}, Available: ${item.available}`); // Debug log
        });

        // Update all price displays on the page
        document.querySelectorAll('[data-item]').forEach(card => {
          const itemName = card.getAttribute('data-item');
          const priceDisplay = card.querySelector('.price-display');
          
          console.log(`Looking for: "${itemName}"`); // Debug log
          
          if (itemMap.has(itemName)) {
            const item = itemMap.get(itemName);
            if (item.available && item.price > 0) {
              priceDisplay.textContent = `‚Ç¶${item.price.toLocaleString()}`;
              console.log(`‚úì Updated ${itemName} to ‚Ç¶${item.price}`); // Debug log
            } else {
              priceDisplay.textContent = 'Sold Out';
              priceDisplay.style.color = '#ff6b6b';
              console.log(`‚úì ${itemName} marked as Sold Out`); // Debug log
            }
          } else {
            priceDisplay.textContent = 'Sold Out';
            priceDisplay.style.color = '#ff6b6b';
            console.log(`‚úó Item "${itemName}" not found - showing Sold Out`); // Debug log
          }
        });

      } catch (error) {
        console.error('Error loading prices:', error);
        // Fallback: show error or keep "Loading..."
        document.querySelectorAll('.price-display').forEach(p => {
          if (p.textContent === 'Loading...') {
            p.textContent = 'Check menu';
          }
        });
      }
    })();
  </script>
</body>
</html>
